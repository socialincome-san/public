import{j as y,a as te,F as pe,c as L}from"./index-c5ffc9dc.js";import{r as p,R as oe}from"./index-c013ead5.js";import{l as _,j as xe,o as O,S as be,D as K,T as Oe,u as U,h as he,p as ie,c as Ce,d as ne,e as Se,f as Ie,g as ye,R as we,X as q,I as Z,y as z,i as ue,s as Te,C as Pe,k as Ee,m as Ne,n as S,q as E,r as $e,t as fe,x as Fe,v as De,w as Me,z as _e,A as Le}from"./ChevronDownIcon-bdba4bf1.js";function Ae({container:e,accept:n,walk:i,enabled:t=!0}){let l=p.useRef(n),c=p.useRef(i);p.useEffect(()=>{l.current=n,c.current=i},[n,i]),_(()=>{if(!e||!t)return;let r=xe(e);if(!r)return;let v=l.current,x=c.current,s=Object.assign(C=>v(C),{acceptNode:v}),R=r.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,s,!1);for(;R.nextNode();)x(R.currentNode)},[e,t,l,c])}function me(e,n){let i=p.useRef([]),t=O(e);p.useEffect(()=>{let l=[...i.current];for(let[c,r]of n.entries())if(i.current[c]!==r){let v=t(n,l);return i.current=n,v}},[t,...n])}function ke(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function Ve(){return/Android/gi.test(window.navigator.userAgent)}function Be(){return ke()||Ve()}function je(...e){return p.useMemo(()=>xe(...e),[...e])}var Ue=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(Ue||{}),Ke=(e=>(e[e.Single=0]="Single",e[e.Multi=1]="Multi",e))(Ke||{}),qe=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(qe||{}),He=(e=>(e[e.OpenCombobox=0]="OpenCombobox",e[e.CloseCombobox=1]="CloseCombobox",e[e.GoToOption=2]="GoToOption",e[e.RegisterOption=3]="RegisterOption",e[e.UnregisterOption=4]="UnregisterOption",e[e.RegisterLabel=5]="RegisterLabel",e))(He||{});function le(e,n=i=>i){let i=e.activeOptionIndex!==null?e.options[e.activeOptionIndex]:null,t=De(n(e.options.slice()),c=>c.dataRef.current.domRef.current),l=i?t.indexOf(i):null;return l===-1&&(l=null),{options:t,activeOptionIndex:l}}let We={1(e){var n;return(n=e.dataRef.current)!=null&&n.disabled||e.comboboxState===1?e:{...e,activeOptionIndex:null,comboboxState:1}},0(e){var n;if((n=e.dataRef.current)!=null&&n.disabled||e.comboboxState===0)return e;let i=e.activeOptionIndex;if(e.dataRef.current){let{isSelected:t}=e.dataRef.current,l=e.options.findIndex(c=>t(c.dataRef.current.value));l!==-1&&(i=l)}return{...e,comboboxState:0,activeOptionIndex:i}},2(e,n){var i,t,l,c;if((i=e.dataRef.current)!=null&&i.disabled||(t=e.dataRef.current)!=null&&t.optionsRef.current&&!((l=e.dataRef.current)!=null&&l.optionsPropsRef.current.static)&&e.comboboxState===1)return e;let r=le(e);if(r.activeOptionIndex===null){let x=r.options.findIndex(s=>!s.dataRef.current.disabled);x!==-1&&(r.activeOptionIndex=x)}let v=Fe(n,{resolveItems:()=>r.options,resolveActiveIndex:()=>r.activeOptionIndex,resolveId:x=>x.id,resolveDisabled:x=>x.dataRef.current.disabled});return{...e,...r,activeOptionIndex:v,activationTrigger:(c=n.trigger)!=null?c:1}},3:(e,n)=>{var i,t;let l={id:n.id,dataRef:n.dataRef},c=le(e,v=>[...v,l]);e.activeOptionIndex===null&&(i=e.dataRef.current)!=null&&i.isSelected(n.dataRef.current.value)&&(c.activeOptionIndex=c.options.indexOf(l));let r={...e,...c,activationTrigger:1};return(t=e.dataRef.current)!=null&&t.__demoMode&&e.dataRef.current.value===void 0&&(r.activeOptionIndex=0),r},4:(e,n)=>{let i=le(e,t=>{let l=t.findIndex(c=>c.id===n.id);return l!==-1&&t.splice(l,1),t});return{...e,...i,activationTrigger:1}},5:(e,n)=>({...e,labelId:n.id})},ce=p.createContext(null);ce.displayName="ComboboxActionsContext";function Q(e){let n=p.useContext(ce);if(n===null){let i=new Error(`<${e} /> is missing a parent <Combobox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(i,Q),i}return n}let se=p.createContext(null);se.displayName="ComboboxDataContext";function H(e){let n=p.useContext(se);if(n===null){let i=new Error(`<${e} /> is missing a parent <Combobox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(i,H),i}return n}function Ge(e,n){return U(n.type,We,e,n)}let Je=p.Fragment;function Xe(e,n){let{value:i,defaultValue:t,onChange:l,form:c,name:r,by:v=(f,h)=>f===h,disabled:x=!1,__demoMode:s=!1,nullable:R=!1,multiple:C=!1,...o}=e,[a=C?[]:void 0,g]=Oe(i,l,t),[b,d]=p.useReducer(Ge,{dataRef:p.createRef(),comboboxState:s?0:1,options:[],activeOptionIndex:null,activationTrigger:1,labelId:null}),w=p.useRef(!1),A=p.useRef({static:!1,hold:!1}),W=p.useRef(null),$=p.useRef(null),k=p.useRef(null),V=p.useRef(null),F=O(typeof v=="string"?(f,h)=>{let I=v;return(f==null?void 0:f[I])===(h==null?void 0:h[I])}:v),G=p.useCallback(f=>U(u.mode,{1:()=>a.some(h=>F(h,f)),0:()=>F(a,f)}),[a]),u=p.useMemo(()=>({...b,optionsPropsRef:A,labelRef:W,inputRef:$,buttonRef:k,optionsRef:V,value:a,defaultValue:t,disabled:x,mode:C?1:0,get activeOptionIndex(){if(w.current&&b.activeOptionIndex===null&&b.options.length>0){let f=b.options.findIndex(h=>!h.dataRef.current.disabled);if(f!==-1)return f}return b.activeOptionIndex},compare:F,isSelected:G,nullable:R,__demoMode:s}),[a,t,x,C,R,s,b]),P=p.useRef(u.activeOptionIndex!==null?u.options[u.activeOptionIndex]:null);p.useEffect(()=>{let f=u.activeOptionIndex!==null?u.options[u.activeOptionIndex]:null;P.current!==f&&(P.current=f)}),_(()=>{b.dataRef.current=u},[u]),he([u.buttonRef,u.inputRef,u.optionsRef],()=>ae.closeCombobox(),u.comboboxState===0);let B=p.useMemo(()=>({open:u.comboboxState===0,disabled:x,activeIndex:u.activeOptionIndex,activeOption:u.activeOptionIndex===null?null:u.options[u.activeOptionIndex].dataRef.current.value,value:a}),[u,x,a]),re=O(f=>{let h=u.options.find(I=>I.id===f);h&&D(h.dataRef.current.value)}),m=O(()=>{if(u.activeOptionIndex!==null){let{dataRef:f,id:h}=u.options[u.activeOptionIndex];D(f.current.value),ae.goToOption(S.Specific,h)}}),J=O(()=>{d({type:0}),w.current=!0}),N=O(()=>{d({type:1}),w.current=!1}),X=O((f,h,I)=>(w.current=!1,f===S.Specific?d({type:2,focus:S.Specific,id:h,trigger:I}):d({type:2,focus:f,trigger:I}))),T=O((f,h)=>(d({type:3,id:f,dataRef:h}),()=>{var I;((I=P.current)==null?void 0:I.id)===f&&(w.current=!0),d({type:4,id:f})})),M=O(f=>(d({type:5,id:f}),()=>d({type:5,id:null}))),D=O(f=>U(u.mode,{0(){return g==null?void 0:g(f)},1(){let h=u.value.slice(),I=h.findIndex(ee=>F(ee,f));return I===-1?h.push(f):h.splice(I,1),g==null?void 0:g(h)}})),ae=p.useMemo(()=>({onChange:D,registerOption:T,registerLabel:M,goToOption:X,closeCombobox:N,openCombobox:J,selectActiveOption:m,selectOption:re}),[]),ge=n===null?{}:{ref:n},Y=p.useRef(null),Re=ie();return p.useEffect(()=>{Y.current&&t!==void 0&&Re.addEventListener(Y.current,"reset",()=>{g==null||g(t)})},[Y,g]),oe.createElement(ce.Provider,{value:ae},oe.createElement(se.Provider,{value:u},oe.createElement(Ce,{value:U(u.comboboxState,{0:ne.Open,1:ne.Closed})},r!=null&&a!=null&&Se({[r]:a}).map(([f,h],I)=>oe.createElement(Ie,{features:ye.Hidden,ref:I===0?ee=>{var de;Y.current=(de=ee==null?void 0:ee.closest("form"))!=null?de:null}:void 0,...we({key:f,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:c,name:f,value:h})})),q({ourProps:ge,theirProps:o,slot:B,defaultTag:Je,name:"Combobox"}))))}let Ze="input";function ze(e,n){var i,t,l,c;let r=Z(),{id:v=`headlessui-combobox-input-${r}`,onChange:x,displayValue:s,type:R="text",...C}=e,o=H("Combobox.Input"),a=Q("Combobox.Input"),g=z(o.inputRef,n),b=je(o.inputRef),d=p.useRef(!1),w=ie(),A=O(()=>{a.onChange(null),o.optionsRef.current&&(o.optionsRef.current.scrollTop=0),a.goToOption(S.Nothing)}),W=function(){var m;return typeof s=="function"&&o.value!==void 0?(m=s(o.value))!=null?m:"":typeof o.value=="string"?o.value:""}();me(([m,J],[N,X])=>{if(d.current)return;let T=o.inputRef.current;T&&((X===0&&J===1||m!==N)&&(T.value=m),requestAnimationFrame(()=>{if(d.current||!T||(b==null?void 0:b.activeElement)!==T)return;let{selectionStart:M,selectionEnd:D}=T;Math.abs((D??0)-(M??0))===0&&M===0&&T.setSelectionRange(T.value.length,T.value.length)}))},[W,o.comboboxState,b]),me(([m],[J])=>{if(m===0&&J===1){if(d.current)return;let N=o.inputRef.current;if(!N)return;let X=N.value,{selectionStart:T,selectionEnd:M,selectionDirection:D}=N;N.value="",N.value=X,D!==null?N.setSelectionRange(T,M,D):N.setSelectionRange(T,M)}},[o.comboboxState]);let $=p.useRef(!1),k=O(()=>{$.current=!0}),V=O(()=>{w.nextFrame(()=>{$.current=!1})}),F=O(m=>{switch(d.current=!0,m.key){case E.Enter:if(d.current=!1,o.comboboxState!==0||$.current)return;if(m.preventDefault(),m.stopPropagation(),o.activeOptionIndex===null){a.closeCombobox();return}a.selectActiveOption(),o.mode===0&&a.closeCombobox();break;case E.ArrowDown:return d.current=!1,m.preventDefault(),m.stopPropagation(),U(o.comboboxState,{0:()=>{a.goToOption(S.Next)},1:()=>{a.openCombobox()}});case E.ArrowUp:return d.current=!1,m.preventDefault(),m.stopPropagation(),U(o.comboboxState,{0:()=>{a.goToOption(S.Previous)},1:()=>{a.openCombobox(),w.nextFrame(()=>{o.value||a.goToOption(S.Last)})}});case E.Home:if(m.shiftKey)break;return d.current=!1,m.preventDefault(),m.stopPropagation(),a.goToOption(S.First);case E.PageUp:return d.current=!1,m.preventDefault(),m.stopPropagation(),a.goToOption(S.First);case E.End:if(m.shiftKey)break;return d.current=!1,m.preventDefault(),m.stopPropagation(),a.goToOption(S.Last);case E.PageDown:return d.current=!1,m.preventDefault(),m.stopPropagation(),a.goToOption(S.Last);case E.Escape:return d.current=!1,o.comboboxState!==0?void 0:(m.preventDefault(),o.optionsRef.current&&!o.optionsPropsRef.current.static&&m.stopPropagation(),o.nullable&&o.mode===0&&o.value===null&&A(),a.closeCombobox());case E.Tab:if(d.current=!1,o.comboboxState!==0)return;o.mode===0&&a.selectActiveOption(),a.closeCombobox();break}}),G=O(m=>{x==null||x(m),o.nullable&&o.mode===0&&m.target.value===""&&A(),a.openCombobox()}),u=O(()=>{d.current=!1}),P=ue(()=>{if(o.labelId)return[o.labelId].join(" ")},[o.labelId]),B=p.useMemo(()=>({open:o.comboboxState===0,disabled:o.disabled}),[o]),re={ref:g,id:v,role:"combobox",type:R,"aria-controls":(i=o.optionsRef.current)==null?void 0:i.id,"aria-expanded":o.comboboxState===0,"aria-activedescendant":o.activeOptionIndex===null||(t=o.options[o.activeOptionIndex])==null?void 0:t.id,"aria-labelledby":P,"aria-autocomplete":"list",defaultValue:(c=(l=e.defaultValue)!=null?l:o.defaultValue!==void 0?s==null?void 0:s(o.defaultValue):null)!=null?c:o.defaultValue,disabled:o.disabled,onCompositionStart:k,onCompositionEnd:V,onKeyDown:F,onChange:G,onBlur:u};return q({ourProps:re,theirProps:C,slot:B,defaultTag:Ze,name:"Combobox.Input"})}let Qe="button";function Ye(e,n){var i;let t=H("Combobox.Button"),l=Q("Combobox.Button"),c=z(t.buttonRef,n),r=Z(),{id:v=`headlessui-combobox-button-${r}`,...x}=e,s=ie(),R=O(b=>{switch(b.key){case E.ArrowDown:return b.preventDefault(),b.stopPropagation(),t.comboboxState===1&&l.openCombobox(),s.nextFrame(()=>{var d;return(d=t.inputRef.current)==null?void 0:d.focus({preventScroll:!0})});case E.ArrowUp:return b.preventDefault(),b.stopPropagation(),t.comboboxState===1&&(l.openCombobox(),s.nextFrame(()=>{t.value||l.goToOption(S.Last)})),s.nextFrame(()=>{var d;return(d=t.inputRef.current)==null?void 0:d.focus({preventScroll:!0})});case E.Escape:return t.comboboxState!==0?void 0:(b.preventDefault(),t.optionsRef.current&&!t.optionsPropsRef.current.static&&b.stopPropagation(),l.closeCombobox(),s.nextFrame(()=>{var d;return(d=t.inputRef.current)==null?void 0:d.focus({preventScroll:!0})}));default:return}}),C=O(b=>{if($e(b.currentTarget))return b.preventDefault();t.comboboxState===0?l.closeCombobox():(b.preventDefault(),l.openCombobox()),s.nextFrame(()=>{var d;return(d=t.inputRef.current)==null?void 0:d.focus({preventScroll:!0})})}),o=ue(()=>{if(t.labelId)return[t.labelId,v].join(" ")},[t.labelId,v]),a=p.useMemo(()=>({open:t.comboboxState===0,disabled:t.disabled,value:t.value}),[t]),g={ref:c,id:v,type:Te(e,t.buttonRef),tabIndex:-1,"aria-haspopup":"listbox","aria-controls":(i=t.optionsRef.current)==null?void 0:i.id,"aria-expanded":t.comboboxState===0,"aria-labelledby":o,disabled:t.disabled,onClick:C,onKeyDown:R};return q({ourProps:g,theirProps:x,slot:a,defaultTag:Qe,name:"Combobox.Button"})}let et="label";function tt(e,n){let i=Z(),{id:t=`headlessui-combobox-label-${i}`,...l}=e,c=H("Combobox.Label"),r=Q("Combobox.Label"),v=z(c.labelRef,n);_(()=>r.registerLabel(t),[t]);let x=O(()=>{var R;return(R=c.inputRef.current)==null?void 0:R.focus({preventScroll:!0})}),s=p.useMemo(()=>({open:c.comboboxState===0,disabled:c.disabled}),[c]);return q({ourProps:{ref:v,id:t,onClick:x},theirProps:l,slot:s,defaultTag:et,name:"Combobox.Label"})}let ot="ul",nt=be.RenderStrategy|be.Static;function rt(e,n){let i=Z(),{id:t=`headlessui-combobox-options-${i}`,hold:l=!1,...c}=e,r=H("Combobox.Options"),v=z(r.optionsRef,n),x=Pe(),s=(()=>x!==null?(x&ne.Open)===ne.Open:r.comboboxState===0)();_(()=>{var a;r.optionsPropsRef.current.static=(a=e.static)!=null?a:!1},[r.optionsPropsRef,e.static]),_(()=>{r.optionsPropsRef.current.hold=l},[r.optionsPropsRef,l]),Ae({container:r.optionsRef.current,enabled:r.comboboxState===0,accept(a){return a.getAttribute("role")==="option"?NodeFilter.FILTER_REJECT:a.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(a){a.setAttribute("role","none")}});let R=ue(()=>{var a,g;return(g=r.labelId)!=null?g:(a=r.buttonRef.current)==null?void 0:a.id},[r.labelId,r.buttonRef.current]),C=p.useMemo(()=>({open:r.comboboxState===0}),[r]),o={"aria-labelledby":R,role:"listbox","aria-multiselectable":r.mode===1?!0:void 0,id:t,ref:v};return q({ourProps:o,theirProps:c,slot:C,defaultTag:ot,features:nt,visible:s,name:"Combobox.Options"})}let at="li";function lt(e,n){var i,t;let l=Z(),{id:c=`headlessui-combobox-option-${l}`,disabled:r=!1,value:v,...x}=e,s=H("Combobox.Option"),R=Q("Combobox.Option"),C=s.activeOptionIndex!==null?s.options[s.activeOptionIndex].id===c:!1,o=s.isSelected(v),a=p.useRef(null),g=Ee({disabled:r,value:v,domRef:a,textValue:(t=(i=a.current)==null?void 0:i.textContent)==null?void 0:t.toLowerCase()}),b=z(n,a),d=O(()=>R.selectOption(c));_(()=>R.registerOption(c,g),[g,c]);let w=p.useRef(!s.__demoMode);_(()=>{if(!s.__demoMode)return;let u=fe();return u.requestAnimationFrame(()=>{w.current=!0}),u.dispose},[]),_(()=>{if(s.comboboxState!==0||!C||!w.current||s.activationTrigger===0)return;let u=fe();return u.requestAnimationFrame(()=>{var P,B;(B=(P=a.current)==null?void 0:P.scrollIntoView)==null||B.call(P,{block:"nearest"})}),u.dispose},[a,C,s.comboboxState,s.activationTrigger,s.activeOptionIndex]);let A=O(u=>{if(r)return u.preventDefault();d(),s.mode===0&&R.closeCombobox(),Be()||requestAnimationFrame(()=>{var P;return(P=s.inputRef.current)==null?void 0:P.focus()})}),W=O(()=>{if(r)return R.goToOption(S.Nothing);R.goToOption(S.Specific,c)}),$=Ne(),k=O(u=>$.update(u)),V=O(u=>{$.wasMoved(u)&&(r||C||R.goToOption(S.Specific,c,0))}),F=O(u=>{$.wasMoved(u)&&(r||C&&(s.optionsPropsRef.current.hold||R.goToOption(S.Nothing)))}),G=p.useMemo(()=>({active:C,selected:o,disabled:r}),[C,o,r]);return q({ourProps:{id:c,ref:b,role:"option",tabIndex:r===!0?void 0:-1,"aria-disabled":r===!0?!0:void 0,"aria-selected":o,disabled:void 0,onClick:A,onFocus:W,onPointerEnter:k,onMouseEnter:k,onPointerMove:V,onMouseMove:V,onPointerLeave:F,onMouseLeave:F},theirProps:x,slot:G,defaultTag:at,name:"Combobox.Option"})}let it=K(Xe),ut=K(Ye),ct=K(ze),st=K(tt),dt=K(rt),pt=K(lt),j=Object.assign(it,{Input:ct,Button:ut,Label:st,Options:dt,Option:pt});const vt=["base","xl"],ve=({label:e,options:n,name:i,size:t="base",value:l=n[0],openOnFocus:c=!0,block:r=!1,labelHidden:v=!1,...x})=>{const[s,R]=p.useState(""),C=s===""?n:n.filter(g=>g.label.toLowerCase().includes(s.toLowerCase())),o=g=>R(g.target.value),a=g=>(g==null?void 0:g.label)||l.label;return y(j,{value:l,...x,children:({open:g})=>te(pe,{children:[y(j.Label,{className:L("block","font-medium","text-gray-700","mb-1",{"sr-only":v}),children:e}),te("div",{className:L("relative","cursor-default","rounded-lg","border","inline-flex","items-center","border-gray-300","bg-white","text-left","transition","hover:shadow-lg","hover:shadow-gray-200",`text-${t}`,{"w-full":r}),children:[(l==null?void 0:l.image)&&y("img",{src:l.image.src,alt:"",className:"ml-3 h-6 w-6 flex-shrink-0 rounded-full object-cover"}),y(j.Input,{className:L("border-none","p-3","pl-3","pr-10","bg-transparent","text-gray-900","focus:ring-0",`text-${t}`,{"w-full":r}),displayValue:a,onChange:o}),y(j.Button,{className:"absolute inset-y-0 right-0 flex items-center pr-2",children:y(Me,{className:"h-5 w-5 text-gray-400","aria-hidden":"true"})})]}),y(_e,{show:g,as:p.Fragment,leave:"transition ease-in duration-100",leaveFrom:"opacity-100",leaveTo:"opacity-0",afterLeave:()=>R(""),children:y(j.Options,{static:!0,className:L("absolute","z-10","mt-1","max-h-56","overflow-auto","rounded-lg","bg-white","py-1","shadow-lg","ring-1","ring-black","ring-opacity-5","focus:outline-none",`text-${t}`,{"w-full":r}),children:C.length===0&&s!==""?y("div",{className:"relative cursor-default select-none px-4 py-2 text-gray-700",children:"Nothing found."}):C.map(b=>y(j.Option,{className:({active:d})=>L(d?"bg-so-color-accent-2-primary-500":"text-gray-900","relative cursor-default select-none py-2 pl-3 pr-12"),value:b,children:({selected:d,active:w})=>te(pe,{children:[te("div",{className:"flex items-center",children:[(b==null?void 0:b.image)&&y("img",{src:b.image.src,alt:"",className:"h-6 w-6 flex-shrink-0 rounded-full object-cover"}),y("span",{className:L(w?"font-semibold":"font-normal","truncate",{"ml-3":!!l.image}),children:b.label})]}),d&&y("span",{className:L("absolute inset-y-0 right-0 flex items-center pr-4"),children:y(Le,{className:"h-5 w-5","aria-hidden":"true"})})]})},b.label))})})]})})};try{ve.displayName="SoCombobox",ve.__docgenInfo={description:"Comboboxes are the foundation of accessible autocompletes and command palettes, complete with robust support for keyboard navigation.\nUse the `SoCombobox` instead of the `SoSelect` whenever you have more than only a couple of options. The Combobox allows a more fine\ngrained search over all options compared to the select.",displayName:"SoCombobox",props:{}}}catch{}export{ve as S,vt as a};
//# sourceMappingURL=Combobox-34f8e589.js.map
