import{j as I,a as P,F as te,c as C}from"./index-c5ffc9dc.js";import{r as c,R as z}from"./index-c013ead5.js";import{o as b,S as re,D as N,y as A,T as ye,u as E,l as Q,h as Oe,a as Se,b as Re,p as H,c as Le,d as U,e as Ie,f as we,g as $e,R as Te,X as M,I as G,i as ie,s as De,C as ke,j as Ce,k as Pe,m as Ee,n as w,q as O,r as Fe,t as J,x as Ne,v as Ae,w as Me,z as Ve,A as qe}from"./ChevronDownIcon-bdba4bf1.js";let ae=/([\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF])/g;function ne(e){var a,i;let r=(a=e.innerText)!=null?a:"",l=e.cloneNode(!0);if(!(l instanceof HTMLElement))return r;let s=!1;for(let o of l.querySelectorAll('[hidden],[aria-hidden],[role="img"]'))o.remove(),s=!0;let t=s?(i=l.innerText)!=null?i:"":r;return ae.test(t)&&(t=t.replace(ae,"")),t}function je(e){let a=e.getAttribute("aria-label");if(typeof a=="string")return a.trim();let i=e.getAttribute("aria-labelledby");if(i){let r=i.split(" ").map(l=>{let s=document.getElementById(l);if(s){let t=s.getAttribute("aria-label");return typeof t=="string"?t.trim():ne(s).trim()}return null}).filter(Boolean);if(r.length>0)return r.join(", ")}return ne(e).trim()}function Be(e){let a=c.useRef(""),i=c.useRef("");return b(()=>{let r=e.current;if(!r)return"";let l=r.innerText;if(a.current===l)return i.current;let s=je(r).trim().toLowerCase();return a.current=l,i.current=s,s})}var _e=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(_e||{}),ze=(e=>(e[e.Single=0]="Single",e[e.Multi=1]="Multi",e))(ze||{}),Qe=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(Qe||{}),He=(e=>(e[e.OpenListbox=0]="OpenListbox",e[e.CloseListbox=1]="CloseListbox",e[e.GoToOption=2]="GoToOption",e[e.Search=3]="Search",e[e.ClearSearch=4]="ClearSearch",e[e.RegisterOption=5]="RegisterOption",e[e.UnregisterOption=6]="UnregisterOption",e[e.RegisterLabel=7]="RegisterLabel",e))(He||{});function X(e,a=i=>i){let i=e.activeOptionIndex!==null?e.options[e.activeOptionIndex]:null,r=Ae(a(e.options.slice()),s=>s.dataRef.current.domRef.current),l=i?r.indexOf(i):null;return l===-1&&(l=null),{options:r,activeOptionIndex:l}}let Ue={1(e){return e.dataRef.current.disabled||e.listboxState===1?e:{...e,activeOptionIndex:null,listboxState:1}},0(e){if(e.dataRef.current.disabled||e.listboxState===0)return e;let a=e.activeOptionIndex,{isSelected:i}=e.dataRef.current,r=e.options.findIndex(l=>i(l.dataRef.current.value));return r!==-1&&(a=r),{...e,listboxState:0,activeOptionIndex:a}},2(e,a){var i;if(e.dataRef.current.disabled||e.listboxState===1)return e;let r=X(e),l=Ne(a,{resolveItems:()=>r.options,resolveActiveIndex:()=>r.activeOptionIndex,resolveId:s=>s.id,resolveDisabled:s=>s.dataRef.current.disabled});return{...e,...r,searchQuery:"",activeOptionIndex:l,activationTrigger:(i=a.trigger)!=null?i:1}},3:(e,a)=>{if(e.dataRef.current.disabled||e.listboxState===1)return e;let i=e.searchQuery!==""?0:1,r=e.searchQuery+a.value.toLowerCase(),l=(e.activeOptionIndex!==null?e.options.slice(e.activeOptionIndex+i).concat(e.options.slice(0,e.activeOptionIndex+i)):e.options).find(t=>{var o;return!t.dataRef.current.disabled&&((o=t.dataRef.current.textValue)==null?void 0:o.startsWith(r))}),s=l?e.options.indexOf(l):-1;return s===-1||s===e.activeOptionIndex?{...e,searchQuery:r}:{...e,searchQuery:r,activeOptionIndex:s,activationTrigger:1}},4(e){return e.dataRef.current.disabled||e.listboxState===1||e.searchQuery===""?e:{...e,searchQuery:""}},5:(e,a)=>{let i={id:a.id,dataRef:a.dataRef},r=X(e,l=>[...l,i]);return e.activeOptionIndex===null&&e.dataRef.current.isSelected(a.dataRef.current.value)&&(r.activeOptionIndex=r.options.indexOf(i)),{...e,...r}},6:(e,a)=>{let i=X(e,r=>{let l=r.findIndex(s=>s.id===a.id);return l!==-1&&r.splice(l,1),r});return{...e,...i,activationTrigger:1}},7:(e,a)=>({...e,labelId:a.id})},Y=c.createContext(null);Y.displayName="ListboxActionsContext";function V(e){let a=c.useContext(Y);if(a===null){let i=new Error(`<${e} /> is missing a parent <Listbox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(i,V),i}return a}let Z=c.createContext(null);Z.displayName="ListboxDataContext";function q(e){let a=c.useContext(Z);if(a===null){let i=new Error(`<${e} /> is missing a parent <Listbox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(i,q),i}return a}function Ge(e,a){return E(a.type,Ue,e,a)}let Ke=c.Fragment;function We(e,a){let{value:i,defaultValue:r,form:l,name:s,onChange:t,by:o=(u,d)=>u===d,disabled:v=!1,horizontal:g=!1,multiple:h=!1,...S}=e;const T=g?"horizontal":"vertical";let $=A(a),[y=h?[]:void 0,p]=ye(i,t,r),[m,n]=c.useReducer(Ge,{dataRef:c.createRef(),listboxState:1,options:[],searchQuery:"",labelId:null,activeOptionIndex:null,activationTrigger:1}),f=c.useRef({static:!1,hold:!1}),k=c.useRef(null),j=c.useRef(null),K=c.useRef(null),R=b(typeof o=="string"?(u,d)=>{let L=o;return(u==null?void 0:u[L])===(d==null?void 0:d[L])}:o),D=c.useCallback(u=>E(x.mode,{1:()=>y.some(d=>R(d,u)),0:()=>R(y,u)}),[y]),x=c.useMemo(()=>({...m,value:y,disabled:v,mode:h?1:0,orientation:T,compare:R,isSelected:D,optionsPropsRef:f,labelRef:k,buttonRef:j,optionsRef:K}),[y,v,h,m]);Q(()=>{m.dataRef.current=x},[x]),Oe([x.buttonRef,x.optionsRef],(u,d)=>{var L;n({type:1}),Se(d,Re.Loose)||(u.preventDefault(),(L=x.buttonRef.current)==null||L.focus())},x.listboxState===0);let oe=c.useMemo(()=>({open:x.listboxState===0,disabled:v,value:y}),[x,v,y]),se=b(u=>{let d=x.options.find(L=>L.id===u);d&&W(d.dataRef.current.value)}),ue=b(()=>{if(x.activeOptionIndex!==null){let{dataRef:u,id:d}=x.options[x.activeOptionIndex];W(u.current.value),n({type:2,focus:w.Specific,id:d})}}),ce=b(()=>n({type:0})),de=b(()=>n({type:1})),pe=b((u,d,L)=>u===w.Specific?n({type:2,focus:w.Specific,id:d,trigger:L}):n({type:2,focus:u,trigger:L})),fe=b((u,d)=>(n({type:5,id:u,dataRef:d}),()=>n({type:6,id:u}))),be=b(u=>(n({type:7,id:u}),()=>n({type:7,id:null}))),W=b(u=>E(x.mode,{0(){return p==null?void 0:p(u)},1(){let d=x.value.slice(),L=d.findIndex(_=>R(_,u));return L===-1?d.push(u):d.splice(L,1),p==null?void 0:p(d)}})),ve=b(u=>n({type:3,value:u})),me=b(()=>n({type:4})),xe=c.useMemo(()=>({onChange:W,registerOption:fe,registerLabel:be,goToOption:pe,closeListbox:de,openListbox:ce,selectActiveOption:ue,selectOption:se,search:ve,clearSearch:me}),[]),ge={ref:$},B=c.useRef(null),he=H();return c.useEffect(()=>{B.current&&r!==void 0&&he.addEventListener(B.current,"reset",()=>{p==null||p(r)})},[B,p]),z.createElement(Y.Provider,{value:xe},z.createElement(Z.Provider,{value:x},z.createElement(Le,{value:E(x.listboxState,{0:U.Open,1:U.Closed})},s!=null&&y!=null&&Ie({[s]:y}).map(([u,d],L)=>z.createElement(we,{features:$e.Hidden,ref:L===0?_=>{var ee;B.current=(ee=_==null?void 0:_.closest("form"))!=null?ee:null}:void 0,...Te({key:u,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:l,name:u,value:d})})),M({ourProps:ge,theirProps:S,slot:oe,defaultTag:Ke,name:"Listbox"}))))}let Xe="button";function Je(e,a){var i;let r=G(),{id:l=`headlessui-listbox-button-${r}`,...s}=e,t=q("Listbox.Button"),o=V("Listbox.Button"),v=A(t.buttonRef,a),g=H(),h=b(m=>{switch(m.key){case O.Space:case O.Enter:case O.ArrowDown:m.preventDefault(),o.openListbox(),g.nextFrame(()=>{t.value||o.goToOption(w.First)});break;case O.ArrowUp:m.preventDefault(),o.openListbox(),g.nextFrame(()=>{t.value||o.goToOption(w.Last)});break}}),S=b(m=>{switch(m.key){case O.Space:m.preventDefault();break}}),T=b(m=>{if(Fe(m.currentTarget))return m.preventDefault();t.listboxState===0?(o.closeListbox(),g.nextFrame(()=>{var n;return(n=t.buttonRef.current)==null?void 0:n.focus({preventScroll:!0})})):(m.preventDefault(),o.openListbox())}),$=ie(()=>{if(t.labelId)return[t.labelId,l].join(" ")},[t.labelId,l]),y=c.useMemo(()=>({open:t.listboxState===0,disabled:t.disabled,value:t.value}),[t]),p={ref:v,id:l,type:De(e,t.buttonRef),"aria-haspopup":"listbox","aria-controls":(i=t.optionsRef.current)==null?void 0:i.id,"aria-expanded":t.listboxState===0,"aria-labelledby":$,disabled:t.disabled,onKeyDown:h,onKeyUp:S,onClick:T};return M({ourProps:p,theirProps:s,slot:y,defaultTag:Xe,name:"Listbox.Button"})}let Ye="label";function Ze(e,a){let i=G(),{id:r=`headlessui-listbox-label-${i}`,...l}=e,s=q("Listbox.Label"),t=V("Listbox.Label"),o=A(s.labelRef,a);Q(()=>t.registerLabel(r),[r]);let v=b(()=>{var h;return(h=s.buttonRef.current)==null?void 0:h.focus({preventScroll:!0})}),g=c.useMemo(()=>({open:s.listboxState===0,disabled:s.disabled}),[s]);return M({ourProps:{ref:o,id:r,onClick:v},theirProps:l,slot:g,defaultTag:Ye,name:"Listbox.Label"})}let et="ul",tt=re.RenderStrategy|re.Static;function rt(e,a){var i;let r=G(),{id:l=`headlessui-listbox-options-${r}`,...s}=e,t=q("Listbox.Options"),o=V("Listbox.Options"),v=A(t.optionsRef,a),g=H(),h=H(),S=ke(),T=(()=>S!==null?(S&U.Open)===U.Open:t.listboxState===0)();c.useEffect(()=>{var n;let f=t.optionsRef.current;f&&t.listboxState===0&&f!==((n=Ce(f))==null?void 0:n.activeElement)&&f.focus({preventScroll:!0})},[t.listboxState,t.optionsRef]);let $=b(n=>{switch(h.dispose(),n.key){case O.Space:if(t.searchQuery!=="")return n.preventDefault(),n.stopPropagation(),o.search(n.key);case O.Enter:if(n.preventDefault(),n.stopPropagation(),t.activeOptionIndex!==null){let{dataRef:f}=t.options[t.activeOptionIndex];o.onChange(f.current.value)}t.mode===0&&(o.closeListbox(),J().nextFrame(()=>{var f;return(f=t.buttonRef.current)==null?void 0:f.focus({preventScroll:!0})}));break;case E(t.orientation,{vertical:O.ArrowDown,horizontal:O.ArrowRight}):return n.preventDefault(),n.stopPropagation(),o.goToOption(w.Next);case E(t.orientation,{vertical:O.ArrowUp,horizontal:O.ArrowLeft}):return n.preventDefault(),n.stopPropagation(),o.goToOption(w.Previous);case O.Home:case O.PageUp:return n.preventDefault(),n.stopPropagation(),o.goToOption(w.First);case O.End:case O.PageDown:return n.preventDefault(),n.stopPropagation(),o.goToOption(w.Last);case O.Escape:return n.preventDefault(),n.stopPropagation(),o.closeListbox(),g.nextFrame(()=>{var f;return(f=t.buttonRef.current)==null?void 0:f.focus({preventScroll:!0})});case O.Tab:n.preventDefault(),n.stopPropagation();break;default:n.key.length===1&&(o.search(n.key),h.setTimeout(()=>o.clearSearch(),350));break}}),y=ie(()=>{var n,f,k;return(k=(n=t.labelRef.current)==null?void 0:n.id)!=null?k:(f=t.buttonRef.current)==null?void 0:f.id},[t.labelRef.current,t.buttonRef.current]),p=c.useMemo(()=>({open:t.listboxState===0}),[t]),m={"aria-activedescendant":t.activeOptionIndex===null||(i=t.options[t.activeOptionIndex])==null?void 0:i.id,"aria-multiselectable":t.mode===1?!0:void 0,"aria-labelledby":y,"aria-orientation":t.orientation,id:l,onKeyDown:$,role:"listbox",tabIndex:0,ref:v};return M({ourProps:m,theirProps:s,slot:p,defaultTag:et,features:tt,visible:T,name:"Listbox.Options"})}let at="li";function nt(e,a){let i=G(),{id:r=`headlessui-listbox-option-${i}`,disabled:l=!1,value:s,...t}=e,o=q("Listbox.Option"),v=V("Listbox.Option"),g=o.activeOptionIndex!==null?o.options[o.activeOptionIndex].id===r:!1,h=o.isSelected(s),S=c.useRef(null),T=Be(S),$=Pe({disabled:l,value:s,domRef:S,get textValue(){return T()}}),y=A(a,S);Q(()=>{if(o.listboxState!==0||!g||o.activationTrigger===0)return;let R=J();return R.requestAnimationFrame(()=>{var D,x;(x=(D=S.current)==null?void 0:D.scrollIntoView)==null||x.call(D,{block:"nearest"})}),R.dispose},[S,g,o.listboxState,o.activationTrigger,o.activeOptionIndex]),Q(()=>v.registerOption(r,$),[$,r]);let p=b(R=>{if(l)return R.preventDefault();v.onChange(s),o.mode===0&&(v.closeListbox(),J().nextFrame(()=>{var D;return(D=o.buttonRef.current)==null?void 0:D.focus({preventScroll:!0})}))}),m=b(()=>{if(l)return v.goToOption(w.Nothing);v.goToOption(w.Specific,r)}),n=Ee(),f=b(R=>n.update(R)),k=b(R=>{n.wasMoved(R)&&(l||g||v.goToOption(w.Specific,r,0))}),j=b(R=>{n.wasMoved(R)&&(l||g&&v.goToOption(w.Nothing))}),K=c.useMemo(()=>({active:g,selected:h,disabled:l}),[g,h,l]);return M({ourProps:{id:r,ref:y,role:"option",tabIndex:l===!0?void 0:-1,"aria-disabled":l===!0?!0:void 0,"aria-selected":h,disabled:void 0,onClick:p,onFocus:m,onPointerEnter:f,onMouseEnter:f,onPointerMove:k,onMouseMove:k,onPointerLeave:j,onMouseLeave:j},theirProps:t,slot:K,defaultTag:at,name:"Listbox.Option"})}let lt=N(We),it=N(Je),ot=N(Ze),st=N(rt),ut=N(nt),F=Object.assign(lt,{Button:it,Label:ot,Options:st,Option:ut});const ft=["base","xl"],le=({label:e,options:a,name:i,size:r="base",selected:l=Object.keys(a)[0],block:s=!1,labelHidden:t=!1,...o})=>I(F,{...o,children:({open:v})=>{var g,h,S,T,$;return P(te,{children:[I(F.Label,{className:C("block","font-medium","text-gray-700","mb-1",{"sr-only":t}),children:e}),P("div",{className:"relative",children:[P(F.Button,{className:C("relative","cursor-default","rounded-lg","border","border-gray-300","bg-white","p-3","pl-3","pr-10","text-left","transition","hover:shadow-lg","hover:shadow-gray-200",`text-${r}`,{"w-full":s}),children:[P("span",{className:"flex items-center",children:[((g=a[l])==null?void 0:g.image)&&I("img",{src:(S=(h=a[l])==null?void 0:h.image)==null?void 0:S.src,alt:"",className:"h-6 w-6 flex-shrink-0 rounded-full object-cover"}),I("span",{className:C({"ml-3":!!((T=a[l])!=null&&T.image)},"block","truncate"),children:($=a[l])==null?void 0:$.label})]}),I("span",{className:"pointer-events-none absolute inset-y-0 right-0 ml-2 flex items-center pr-2",children:I(Me,{className:"h-5 w-5 text-gray-400","aria-hidden":"true"})})]}),I(Ve,{show:v,as:c.Fragment,leave:"transition ease-in duration-100",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:I(F.Options,{className:C("absolute","z-10","mt-1","max-h-56","overflow-auto","rounded-lg","bg-white","py-1","shadow-lg","ring-1","ring-black","ring-opacity-5","focus:outline-none",`text-${r}`,{"w-full":s}),children:Object.entries(a).map(([y,p],m)=>I(F.Option,{className:({active:n})=>C(n?"bg-so-color-accent-2-primary-500 text-white":"text-gray-900","relative cursor-default select-none py-2 pl-3 pr-12"),value:y,children:({selected:n,active:f})=>P(te,{children:[P("div",{className:"flex items-center",children:[(p==null?void 0:p.image)&&I("img",{src:p.image.src,alt:"",className:"h-6 w-6 flex-shrink-0 rounded-full object-cover"}),I("span",{className:C(f?"font-semibold":"font-normal","truncate",{"ml-3":!!(p!=null&&p.image)}),children:p.label})]}),n&&I("span",{className:C("absolute inset-y-0 right-0 flex items-center pr-4"),children:I(qe,{className:"h-5 w-5","aria-hidden":"true"})})]})},m))})})]})]})}});try{le.displayName="SoSelect",le.__docgenInfo={description:"",displayName:"SoSelect",props:{label:{defaultValue:null,description:"The select's label elements",name:"label",required:!0,type:{name:"string"}},options:{defaultValue:null,description:"Options available for selection",name:"options",required:!0,type:{name:"Record<string, SoSelectItem>"}},selected:{defaultValue:{value:"Object.keys(options)[0]"},description:"The selected/current value",name:"selected",required:!1,type:{name:"string"}},block:{defaultValue:{value:"false"},description:"Render full width",name:"block",required:!1,type:{name:"boolean"}},labelHidden:{defaultValue:{value:"false"},description:"If true, the label is visually hidden. It will still be available to screenreaders.",name:"labelHidden",required:!1,type:{name:"boolean"}},size:{defaultValue:{value:"base"},description:"Visual size of the button",name:"size",required:!1,type:{name:"enum",value:[{value:'"base"'},{value:'"xl"'}]}},onChange:{defaultValue:null,description:"Emits the selected value on change",name:"onChange",required:!1,type:{name:"(value: string) => void"}},value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"unknown"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}},name:{defaultValue:null,description:"",name:"name",required:!1,type:{name:"string"}}}}}catch{}export{le as S,ft as a};
//# sourceMappingURL=Select-c3339826.js.map
