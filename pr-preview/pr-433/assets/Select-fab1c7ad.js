import{j as L,a as E,F as te,c as P}from"./index-bf905c9d.js";import{r as c,R as z}from"./index-ec8b93d8.js";import{o as f,S as re,D as A,y as M,T as ye,u as k,l as H,H as Se,h as Oe,a as Re,p as U,c as Le,d as G,e as Ie,b as we,f as $e,R as Te,X as V,I as K,i as ie,s as De,C as Ce,g as Pe,j as Ee,k as ke,m as I,n as h,r as Fe,q as W,x as Ne,t as Ae,v as Me,$ as Ve,w as qe}from"./ChevronDownIcon-76fe8021.js";let ne=/([\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF])/g;function ae(e){var a,i;let r=(a=e.innerText)!=null?a:"",n=e.cloneNode(!0);if(!(n instanceof HTMLElement))return r;let s=!1;for(let o of n.querySelectorAll('[hidden],[aria-hidden],[role="img"]'))o.remove(),s=!0;let t=s?(i=n.innerText)!=null?i:"":r;return ne.test(t)&&(t=t.replace(ne,"")),t}function je(e){let a=e.getAttribute("aria-label");if(typeof a=="string")return a.trim();let i=e.getAttribute("aria-labelledby");if(i){let r=i.split(" ").map(n=>{let s=document.getElementById(n);if(s){let t=s.getAttribute("aria-label");return typeof t=="string"?t.trim():ae(s).trim()}return null}).filter(Boolean);if(r.length>0)return r.join(", ")}return ae(e).trim()}function Be(e){let a=c.useRef(""),i=c.useRef("");return f(()=>{let r=e.current;if(!r)return"";let n=r.innerText;if(a.current===n)return i.current;let s=je(r).trim().toLowerCase();return a.current=n,i.current=s,s})}var Qe=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(Qe||{}),_e=(e=>(e[e.Single=0]="Single",e[e.Multi=1]="Multi",e))(_e||{}),ze=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(ze||{}),He=(e=>(e[e.OpenListbox=0]="OpenListbox",e[e.CloseListbox=1]="CloseListbox",e[e.GoToOption=2]="GoToOption",e[e.Search=3]="Search",e[e.ClearSearch=4]="ClearSearch",e[e.RegisterOption=5]="RegisterOption",e[e.UnregisterOption=6]="UnregisterOption",e[e.RegisterLabel=7]="RegisterLabel",e))(He||{});function J(e,a=i=>i){let i=e.activeOptionIndex!==null?e.options[e.activeOptionIndex]:null,r=Ae(a(e.options.slice()),s=>s.dataRef.current.domRef.current),n=i?r.indexOf(i):null;return n===-1&&(n=null),{options:r,activeOptionIndex:n}}let Ue={[1](e){return e.dataRef.current.disabled||e.listboxState===1?e:{...e,activeOptionIndex:null,listboxState:1}},[0](e){if(e.dataRef.current.disabled||e.listboxState===0)return e;let a=e.activeOptionIndex,{isSelected:i}=e.dataRef.current,r=e.options.findIndex(n=>i(n.dataRef.current.value));return r!==-1&&(a=r),{...e,listboxState:0,activeOptionIndex:a}},[2](e,a){var i;if(e.dataRef.current.disabled||e.listboxState===1)return e;let r=J(e),n=Ne(a,{resolveItems:()=>r.options,resolveActiveIndex:()=>r.activeOptionIndex,resolveId:s=>s.id,resolveDisabled:s=>s.dataRef.current.disabled});return{...e,...r,searchQuery:"",activeOptionIndex:n,activationTrigger:(i=a.trigger)!=null?i:1}},[3]:(e,a)=>{if(e.dataRef.current.disabled||e.listboxState===1)return e;let i=e.searchQuery!==""?0:1,r=e.searchQuery+a.value.toLowerCase(),n=(e.activeOptionIndex!==null?e.options.slice(e.activeOptionIndex+i).concat(e.options.slice(0,e.activeOptionIndex+i)):e.options).find(t=>{var o;return!t.dataRef.current.disabled&&((o=t.dataRef.current.textValue)==null?void 0:o.startsWith(r))}),s=n?e.options.indexOf(n):-1;return s===-1||s===e.activeOptionIndex?{...e,searchQuery:r}:{...e,searchQuery:r,activeOptionIndex:s,activationTrigger:1}},[4](e){return e.dataRef.current.disabled||e.listboxState===1||e.searchQuery===""?e:{...e,searchQuery:""}},[5]:(e,a)=>{let i={id:a.id,dataRef:a.dataRef},r=J(e,n=>[...n,i]);return e.activeOptionIndex===null&&e.dataRef.current.isSelected(a.dataRef.current.value)&&(r.activeOptionIndex=r.options.indexOf(i)),{...e,...r}},[6]:(e,a)=>{let i=J(e,r=>{let n=r.findIndex(s=>s.id===a.id);return n!==-1&&r.splice(n,1),r});return{...e,...i,activationTrigger:1}},[7]:(e,a)=>({...e,labelId:a.id})},Y=c.createContext(null);Y.displayName="ListboxActionsContext";function q(e){let a=c.useContext(Y);if(a===null){let i=new Error(`<${e} /> is missing a parent <Listbox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(i,q),i}return a}let Z=c.createContext(null);Z.displayName="ListboxDataContext";function j(e){let a=c.useContext(Z);if(a===null){let i=new Error(`<${e} /> is missing a parent <Listbox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(i,j),i}return a}function Ge(e,a){return k(a.type,Ue,e,a)}let Ke=c.Fragment;function Xe(e,a){let{value:i,defaultValue:r,form:n,name:s,onChange:t,by:o=(u,d)=>u===d,disabled:b=!1,horizontal:p=!1,multiple:g=!1,...y}=e;const $=p?"horizontal":"vertical";let T=M(a),[S=g?[]:void 0,w]=ye(i,t,r),[x,l]=c.useReducer(Ge,{dataRef:c.createRef(),listboxState:1,options:[],searchQuery:"",labelId:null,activeOptionIndex:null,activationTrigger:1}),v=c.useRef({static:!1,hold:!1}),C=c.useRef(null),B=c.useRef(null),X=c.useRef(null),O=f(typeof o=="string"?(u,d)=>{let R=o;return(u==null?void 0:u[R])===(d==null?void 0:d[R])}:o),D=c.useCallback(u=>k(m.mode,{[1]:()=>S.some(d=>O(d,u)),[0]:()=>O(S,u)}),[S]),m=c.useMemo(()=>({...x,value:S,disabled:b,mode:g?1:0,orientation:$,compare:O,isSelected:D,optionsPropsRef:v,labelRef:C,buttonRef:B,optionsRef:X}),[S,b,g,x]);H(()=>{x.dataRef.current=m},[m]),Se([m.buttonRef,m.optionsRef],(u,d)=>{var R;l({type:1}),Oe(d,Re.Loose)||(u.preventDefault(),(R=m.buttonRef.current)==null||R.focus())},m.listboxState===0);let oe=c.useMemo(()=>({open:m.listboxState===0,disabled:b,value:S}),[m,b,S]),se=f(u=>{let d=m.options.find(R=>R.id===u);d&&F(d.dataRef.current.value)}),ue=f(()=>{if(m.activeOptionIndex!==null){let{dataRef:u,id:d}=m.options[m.activeOptionIndex];F(u.current.value),l({type:2,focus:I.Specific,id:d})}}),ce=f(()=>l({type:0})),de=f(()=>l({type:1})),pe=f((u,d,R)=>u===I.Specific?l({type:2,focus:I.Specific,id:d,trigger:R}):l({type:2,focus:u,trigger:R})),fe=f((u,d)=>(l({type:5,id:u,dataRef:d}),()=>l({type:6,id:u}))),be=f(u=>(l({type:7,id:u}),()=>l({type:7,id:null}))),F=f(u=>k(m.mode,{[0](){return w==null?void 0:w(u)},[1](){let d=m.value.slice(),R=d.findIndex(_=>O(_,u));return R===-1?d.push(u):d.splice(R,1),w==null?void 0:w(d)}})),ve=f(u=>l({type:3,value:u})),me=f(()=>l({type:4})),xe=c.useMemo(()=>({onChange:F,registerOption:fe,registerLabel:be,goToOption:pe,closeListbox:de,openListbox:ce,selectActiveOption:ue,selectOption:se,search:ve,clearSearch:me}),[]),ge={ref:T},Q=c.useRef(null),he=U();return c.useEffect(()=>{Q.current&&r!==void 0&&he.addEventListener(Q.current,"reset",()=>{F(r)})},[Q,F]),z.createElement(Y.Provider,{value:xe},z.createElement(Z.Provider,{value:m},z.createElement(Le,{value:k(m.listboxState,{[0]:G.Open,[1]:G.Closed})},s!=null&&S!=null&&Ie({[s]:S}).map(([u,d],R)=>z.createElement(we,{features:$e.Hidden,ref:R===0?_=>{var ee;Q.current=(ee=_==null?void 0:_.closest("form"))!=null?ee:null}:void 0,...Te({key:u,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:n,name:u,value:d})})),V({ourProps:ge,theirProps:y,slot:oe,defaultTag:Ke,name:"Listbox"}))))}let Je="button";function We(e,a){var i;let r=K(),{id:n=`headlessui-listbox-button-${r}`,...s}=e,t=j("Listbox.Button"),o=q("Listbox.Button"),b=M(t.buttonRef,a),p=U(),g=f(x=>{switch(x.key){case h.Space:case h.Enter:case h.ArrowDown:x.preventDefault(),o.openListbox(),p.nextFrame(()=>{t.value||o.goToOption(I.First)});break;case h.ArrowUp:x.preventDefault(),o.openListbox(),p.nextFrame(()=>{t.value||o.goToOption(I.Last)});break}}),y=f(x=>{switch(x.key){case h.Space:x.preventDefault();break}}),$=f(x=>{if(Fe(x.currentTarget))return x.preventDefault();t.listboxState===0?(o.closeListbox(),p.nextFrame(()=>{var l;return(l=t.buttonRef.current)==null?void 0:l.focus({preventScroll:!0})})):(x.preventDefault(),o.openListbox())}),T=ie(()=>{if(t.labelId)return[t.labelId,n].join(" ")},[t.labelId,n]),S=c.useMemo(()=>({open:t.listboxState===0,disabled:t.disabled,value:t.value}),[t]),w={ref:b,id:n,type:De(e,t.buttonRef),"aria-haspopup":"listbox","aria-controls":(i=t.optionsRef.current)==null?void 0:i.id,"aria-expanded":t.disabled?void 0:t.listboxState===0,"aria-labelledby":T,disabled:t.disabled,onKeyDown:g,onKeyUp:y,onClick:$};return V({ourProps:w,theirProps:s,slot:S,defaultTag:Je,name:"Listbox.Button"})}let Ye="label";function Ze(e,a){let i=K(),{id:r=`headlessui-listbox-label-${i}`,...n}=e,s=j("Listbox.Label"),t=q("Listbox.Label"),o=M(s.labelRef,a);H(()=>t.registerLabel(r),[r]);let b=f(()=>{var g;return(g=s.buttonRef.current)==null?void 0:g.focus({preventScroll:!0})}),p=c.useMemo(()=>({open:s.listboxState===0,disabled:s.disabled}),[s]);return V({ourProps:{ref:o,id:r,onClick:b},theirProps:n,slot:p,defaultTag:Ye,name:"Listbox.Label"})}let et="ul",tt=re.RenderStrategy|re.Static;function rt(e,a){var i;let r=K(),{id:n=`headlessui-listbox-options-${r}`,...s}=e,t=j("Listbox.Options"),o=q("Listbox.Options"),b=M(t.optionsRef,a),p=U(),g=U(),y=Ce(),$=(()=>y!==null?(y&G.Open)===G.Open:t.listboxState===0)();c.useEffect(()=>{var l;let v=t.optionsRef.current;v&&t.listboxState===0&&v!==((l=Pe(v))==null?void 0:l.activeElement)&&v.focus({preventScroll:!0})},[t.listboxState,t.optionsRef]);let T=f(l=>{switch(g.dispose(),l.key){case h.Space:if(t.searchQuery!=="")return l.preventDefault(),l.stopPropagation(),o.search(l.key);case h.Enter:if(l.preventDefault(),l.stopPropagation(),t.activeOptionIndex!==null){let{dataRef:v}=t.options[t.activeOptionIndex];o.onChange(v.current.value)}t.mode===0&&(o.closeListbox(),W().nextFrame(()=>{var v;return(v=t.buttonRef.current)==null?void 0:v.focus({preventScroll:!0})}));break;case k(t.orientation,{vertical:h.ArrowDown,horizontal:h.ArrowRight}):return l.preventDefault(),l.stopPropagation(),o.goToOption(I.Next);case k(t.orientation,{vertical:h.ArrowUp,horizontal:h.ArrowLeft}):return l.preventDefault(),l.stopPropagation(),o.goToOption(I.Previous);case h.Home:case h.PageUp:return l.preventDefault(),l.stopPropagation(),o.goToOption(I.First);case h.End:case h.PageDown:return l.preventDefault(),l.stopPropagation(),o.goToOption(I.Last);case h.Escape:return l.preventDefault(),l.stopPropagation(),o.closeListbox(),p.nextFrame(()=>{var v;return(v=t.buttonRef.current)==null?void 0:v.focus({preventScroll:!0})});case h.Tab:l.preventDefault(),l.stopPropagation();break;default:l.key.length===1&&(o.search(l.key),g.setTimeout(()=>o.clearSearch(),350));break}}),S=ie(()=>{var l,v,C;return(C=(l=t.labelRef.current)==null?void 0:l.id)!=null?C:(v=t.buttonRef.current)==null?void 0:v.id},[t.labelRef.current,t.buttonRef.current]),w=c.useMemo(()=>({open:t.listboxState===0}),[t]),x={"aria-activedescendant":t.activeOptionIndex===null||(i=t.options[t.activeOptionIndex])==null?void 0:i.id,"aria-multiselectable":t.mode===1?!0:void 0,"aria-labelledby":S,"aria-orientation":t.orientation,id:n,onKeyDown:T,role:"listbox",tabIndex:0,ref:b};return V({ourProps:x,theirProps:s,slot:w,defaultTag:et,features:tt,visible:$,name:"Listbox.Options"})}let nt="li";function at(e,a){let i=K(),{id:r=`headlessui-listbox-option-${i}`,disabled:n=!1,value:s,...t}=e,o=j("Listbox.Option"),b=q("Listbox.Option"),p=o.activeOptionIndex!==null?o.options[o.activeOptionIndex].id===r:!1,g=o.isSelected(s),y=c.useRef(null),$=Be(y),T=Ee({disabled:n,value:s,domRef:y,get textValue(){return $()}}),S=M(a,y);H(()=>{if(o.listboxState!==0||!p||o.activationTrigger===0)return;let O=W();return O.requestAnimationFrame(()=>{var D,m;(m=(D=y.current)==null?void 0:D.scrollIntoView)==null||m.call(D,{block:"nearest"})}),O.dispose},[y,p,o.listboxState,o.activationTrigger,o.activeOptionIndex]),H(()=>b.registerOption(r,T),[T,r]);let w=f(O=>{if(n)return O.preventDefault();b.onChange(s),o.mode===0&&(b.closeListbox(),W().nextFrame(()=>{var D;return(D=o.buttonRef.current)==null?void 0:D.focus({preventScroll:!0})}))}),x=f(()=>{if(n)return b.goToOption(I.Nothing);b.goToOption(I.Specific,r)}),l=ke(),v=f(O=>l.update(O)),C=f(O=>{l.wasMoved(O)&&(n||p||b.goToOption(I.Specific,r,0))}),B=f(O=>{l.wasMoved(O)&&(n||p&&b.goToOption(I.Nothing))}),X=c.useMemo(()=>({active:p,selected:g,disabled:n}),[p,g,n]);return V({ourProps:{id:r,ref:S,role:"option",tabIndex:n===!0?void 0:-1,"aria-disabled":n===!0?!0:void 0,"aria-selected":g,disabled:void 0,onClick:w,onFocus:x,onPointerEnter:v,onMouseEnter:v,onPointerMove:C,onMouseMove:C,onPointerLeave:B,onMouseLeave:B},theirProps:t,slot:X,defaultTag:nt,name:"Listbox.Option"})}let lt=A(Xe),it=A(We),ot=A(Ze),st=A(rt),ut=A(at),N=Object.assign(lt,{Button:it,Label:ot,Options:st,Option:ut});const ft=["base","xl"],le=({label:e,options:a,name:i,size:r="base",value:n=a[0],block:s=!1,labelHidden:t=!1,...o})=>L(N,{...o,children:({open:b})=>E(te,{children:[L(N.Label,{className:P("block","font-medium","text-gray-700","mb-1",{"sr-only":t}),children:e}),E("div",{className:"relative",children:[E(N.Button,{className:P("relative","cursor-default","rounded-lg","border","border-gray-300","bg-white","p-3","pl-3","pr-10","text-left","transition","hover:shadow-lg","hover:shadow-gray-200",`text-${r}`,{"w-full":s}),children:[E("span",{className:"flex items-center",children:[(n==null?void 0:n.image)&&L("img",{src:n.image.src,alt:"",className:"h-6 w-6 flex-shrink-0 rounded-full object-cover"}),L("span",{className:P({"ml-3":n.image},"block","truncate"),children:n.label})]}),L("span",{className:"pointer-events-none absolute inset-y-0 right-0 ml-2 flex items-center pr-2",children:L(Me,{className:"h-5 w-5 text-gray-400","aria-hidden":"true"})})]}),L(Ve,{show:b,as:c.Fragment,leave:"transition ease-in duration-100",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:L(N.Options,{className:P("absolute","z-10","mt-1","max-h-56","overflow-auto","rounded-lg","bg-white","py-1","shadow-lg","ring-1","ring-black","ring-opacity-5","focus:outline-none",`text-${r}`,{"w-full":s}),children:a.map((p,g)=>L(N.Option,{className:({active:y})=>P(y?"text-white bg-so-color-accent-2-primary-500":"text-gray-900","relative cursor-default select-none py-2 pl-3 pr-12"),value:p,children:({selected:y,active:$})=>E(te,{children:[E("div",{className:"flex items-center",children:[(p==null?void 0:p.image)&&L("img",{src:p.image.src,alt:"",className:"h-6 w-6 flex-shrink-0 rounded-full object-cover"}),L("span",{className:P($?"font-semibold":"font-normal","truncate",{"ml-3":n.image}),children:p.label})]}),y&&L("span",{className:P("absolute inset-y-0 right-0 flex items-center pr-4"),children:L(qe,{className:"h-5 w-5","aria-hidden":"true"})})]})},g))})})]})]})});try{le.displayName="SoSelect",le.__docgenInfo={description:"",displayName:"SoSelect",props:{label:{defaultValue:null,description:"The select's label elements",name:"label",required:!0,type:{name:"string"}},options:{defaultValue:null,description:"Options available for selection",name:"options",required:!0,type:{name:"SoSelectItem[]"}},value:{defaultValue:{value:"options[0]"},description:"The selected/current value",name:"value",required:!1,type:{name:"SoSelectItem"}},onChange:{defaultValue:null,description:"Emits the selected value on change",name:"onChange",required:!1,type:{name:"(value: SoSelectItem) => void"}},block:{defaultValue:{value:"false"},description:"Render full width",name:"block",required:!1,type:{name:"boolean"}},labelHidden:{defaultValue:{value:"false"},description:"If true, the label is visually hidden. It will still be available to screenreaders.",name:"labelHidden",required:!1,type:{name:"boolean"}},size:{defaultValue:{value:"base"},description:"Visual size of the button",name:"size",required:!1,type:{name:"enum",value:[{value:'"base"'},{value:'"xl"'}]}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}},name:{defaultValue:null,description:"",name:"name",required:!1,type:{name:"string"}}}}}catch{}export{le as S,ft as a};
//# sourceMappingURL=Select-fab1c7ad.js.map
