name: Deploy production environment
on:
  push:
    tags:
      - "release-*"
jobs:
  deploy:
    name: Deploy production environment
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repository
        uses: actions/checkout@v3

      - name: Initialize repository
        uses: ./.github/workflows/actions/init

      - name: Deploy admin to social-income-prod Firebase project
        uses: ./.github/workflows/actions/deploy
        secrets: inherit
        with:
          component: admin
          project: social-income-prod

      - name: Deploy functions to social-income-prod Firebase project
        uses: ./.github/workflows/actions/deploy
        secrets: inherit
        with:
          component: functions
          project: social-income-prod
